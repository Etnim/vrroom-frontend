
<div class="main">
  <div class="container">
    <div class="header">
      <h1>Application details for application {{ application?.applicationID }}</h1>
    </div>

    @if (application?.applicationID){
    <mat-card-header>
      <mat-card-title>Application Details - ID: {{ application?.applicationID }}</mat-card-title>
    </mat-card-header>

    <mat-card>
      <mat-card-content>
        <!-- General Application Info -->
        <h2>General Info</h2>
        <p>Status: {{ application?.applicationStatus }}</p>
        <p>Date of Submission: {{ getDateFromDateTimeString(application?.dateOfSubmission) }}</p>
        <p>
          Assigned Manager:
          {{
            application?.assignedManager
              ? application.assignedManager.name + ' ' + application.assignedManager.surname
              : 'None'
          }}
        </p>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <!-- Applicant Info -->
      <mat-card-content>
        <h2>Applicant's Info</h2>
        <p>Full Name: {{ application?.customer?.fullName }}</p>
        <p>Personal ID: {{ application?.customer?.pid }}</p>
        <p>Age {{ application?.customer?.age }}</p>
        <p>Email: {{ application?.customer?.email }}</p>
        <p>Phone: {{ application?.customer?.phone }}</p>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <!-- Financial Info -->
        <h2>Financial Info</h2>
        <p>Monthly Income: {{ application?.financialInfo?.monthlyIncome }}</p>
        <p>Marital Status: {{ application?.financialInfo?.maritalStatus }}</p>
        <p>Dependants: {{ application?.financialInfo?.dependants }}</p>
        <p>
          Obligations:
          {{
            application?.financialInfo?.monthlyObligations
              ? application.financialInfo.monthlyObligations
              : 0
          }}
        </p>
        <p>Disposable Income: {{ application?.financialInfo?.disposableIncome }}</p>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <!-- Vehicle Info -->
        <h2>Vehicle Info</h2>
        <div>
          <p>Make: {{ application?.vehicleDetails.make }}</p>
          <p>Model: {{ application?.vehicleDetails.model }}</p>
          <p>Year: {{ application?.vehicleDetails.year }}</p>
          <p>Fuel Type: {{ application?.vehicleDetails.fuel }}</p>
          <p>
            Emissions: {{ application?.vehicleDetails.emissionStart }} to
            {{ application?.vehicleDetails.emissionEnd }} g/km
          </p>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <!-- Leasing Info -->
        <h2>Leasing Info</h2>
        <p>Amount: {{ application?.price }}</p>
        <p>Down Payment: {{ application?.downPayment }}</p>
        <p>Period: {{ application?.yearPeriod }} years</p>
        <p>Residual Value: {{ application?.residualValue }}</p>
        <p>Interest Rate: {{ application?.interestRate }}%</p>
        <p>Credit Rating: {{ application?.creditRating }}</p>
        <p>Euribor: {{ application?.euribor }}%</p>
        <p>Agreement Fee: {{ application?.agreementFee || 'None' }}</p>
      </mat-card-content>
    </mat-card>
    } @else {
    <mat-spinner></mat-spinner>
    }
    <div class="button-container">
      <button id="assign-button">Assign To Me</button>
      <button id="back-button" matButton (click)="viewAdminDashboard()">
        Back to Admin Dashboard
      </button>
    </div>
  </div>
</div>
